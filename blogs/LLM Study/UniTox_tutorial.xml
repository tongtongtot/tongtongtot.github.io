<h2 id="part-chatgpt-4o">Part ChatGPT 4o</h2>
<h3 id="chatgpt-4o-api-demo">ChatGPT 4o API demo</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> openai <span class="im">import</span> OpenAI</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>model_use <span class="op">=</span> <span class="st">&quot;gpt-4o-2024-08-06&quot;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> OpenAI(api_key<span class="op">=</span><span class="st">&quot;Your-API-key&quot;</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>completion <span class="op">=</span> client.beta.chat.completions.parse(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>     model<span class="op">=</span>model_use,</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>     messages<span class="op">=</span>[</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>         {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;Extract the event information.&quot;</span>},</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>         {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;Alice and Bob are going to a science fair on Friday.&quot;</span>},</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>     ],</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>event <span class="op">=</span> completion.choices[<span class="dv">0</span>].message.parsed</span></code></pre></div>
<p>Note: I tried to use model “gpt-4o” but failed.</p>
<h3 id="how-to-create-chatgpt-api-key">How to create ChatGPT API
Key</h3>
<ol type="1">
<li>Log in to <a
href="https://platform.openai.com/docs/overview">openai</a></li>
<li>Use the search bar to search “API keys”</li>
<li>Create a new secret key (Shown only once, invisible after closing
the tab)</li>
<li>Go to billing to add some credit to the account</li>
</ol>
<h2 id="part-unitox-chatgpt">Part UniTox ChatGPT</h2>
<h3 id="read-from-fda.gov">Read from fda.gov</h3>
<ol type="1">
<li><p>Read the label of the drug we are interested in from a .csv
file.</p></li>
<li><p>Read the .html file or the .pdf file on the page</p></li>
<li><p>Create a summary of the .html and .pdf files by ChatGPT</p></li>
<li><p>Use the summary generated by ChatGPT to let ChatGPT decide
whether the drug is toxic or not and how toxic the drug is.</p>
<pre><code>Initial Prompt: 
Provide a summary of all the parts of the drug label that discuss cardiotoxicity risks and cardiotoxic reactions for this drug.
In your summary of each sentence, clearly state whether the drug itself was associated with or caused the cardiotoxicity risk.

Output1

Toxidity Score Prompt:
Given the above information about a drug, answer &#39;was this drug associated with No Cardiotoxicity, Less Cardiotoxicity, or Most Cardiotoxicity?&#39;
Now, answer with just one word: No, Less or Most.
Output1 (Summary)

OUtput2

Toxidity Test Prompt:
Given the above information about a drug, answer &#39;was this drug associated with Cardiotoxicity?&#39;
Now, answer with just one word: Yes or No.
Output1

Output3 &lt;-&gt; compare GT</code></pre></li>
</ol>
<figure>
<img
src="/Users/tongtongtot/Library/Application%20Support/typora-user-images/image-20241230175906492.png"
alt="image-20241230175906492" />
<figcaption aria-hidden="true">image-20241230175906492</figcaption>
</figure>
<h2 id="part-llama">Part Llama</h2>
<h3 id="part-ollama">Part Ollama</h3>
<p>First open an ollama server on the server:</p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>ml ollama <span class="co"># activate ollama</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>ollama serve <span class="co"># open ollama server</span></span></code></pre></div>
<p>To use ollama in python: (demo)</p>
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>pip install ollama</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ollama <span class="im">import</span> chat, Client, ChatResponse</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>client <span class="op">=</span> Client(host<span class="op">=</span><span class="st">&#39;http://localhost:11434&#39;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>model_use <span class="op">=</span> <span class="st">&quot;llama3.2&quot;</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>completion <span class="op">=</span> client.chat(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>    model<span class="op">=</span>model_use,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    messages<span class="op">=</span>[</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;system&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;Extract the event information.&quot;</span>},</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>        {<span class="st">&quot;role&quot;</span>: <span class="st">&quot;user&quot;</span>, <span class="st">&quot;content&quot;</span>: <span class="st">&quot;Alice and Bob are going to a science fair on Friday.&quot;</span>},</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>completion[<span class="st">&#39;message&#39;</span>][<span class="st">&#39;content&#39;</span>]</span></code></pre></div>
